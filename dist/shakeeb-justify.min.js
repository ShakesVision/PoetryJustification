/*!
 * ShakeebJustify (Poetry Justification for Urdu / Nastaliq)
 * Author: Shakeeb Ahmad
 * Website: https://shakeeb.in
 * Version: 1.0.4
 * License: MIT
 */
!function(){function e(e){const t=e.cloneNode(!0);return t.querySelectorAll("br").forEach(e=>e.replaceWith("\n")),t.querySelectorAll("p, div, li").forEach(e=>e.append("\n")),t.textContent.replace(/\n\s*\n+/g,"\n").trim()}function t(e,t=null){if(!e)return"";const n=e.split("\n").filter(Boolean);let o="";return n.forEach((e,n)=>{o+=`<tr${t&&(n+1)%t===0?' class="gap"':""}><td>${e}</td></tr>`}),`<table class="sher">${o}</table>`}function n(e){if(!e)return"";const t=e.split("\n").filter(Boolean);let n="";for(let e=0;e<t.length;e+=2)n+=`\n                <tr class="gap">\n                    <td>${t[e]||""}</td>\n                    <td></td>\n                    <td>${t[e+1]||""}</td>\n                </tr>\n            `;return`<table class="sher2">${n}</table>`}function o(n,o){const l=function(e,t){const n=[];let o=0;for(;o<e.length;)for(let l of t){if(o>=e.length)break;n.push(e.slice(o,o+l)),o+=l}return n}(e(n).split("\n").filter(Boolean),o);n.innerHTML=l.map(e=>t(e.join("\n"))).join("")}function l(o,l){const r=e(o).split("\n").filter(Boolean);let a=0,c="";l.forEach(e=>{const o=r.slice(a,a+e.count).join("\n");a+=e.count,"2col"===e.mode?c+=n(o):c+=t(o)}),o.innerHTML=c}function r(){!function(){if(document.getElementById("shakeeb-justify-style"))return;const e=document.createElement("style");e.id="shakeeb-justify-style",e.textContent="\n            table {\n                border-collapse: collapse;\n                margin: 0 auto;\n            }\n\n            .sher, .sher td,\n            .sher2, .sher2 td {\n                text-align: justify;\n                text-align-last: justify;\n                direction: rtl;\n                line-height: 1.5em;\n                unicode-bidi: plaintext;\n            }\n\n            .sher2 td { width: 46%; }\n            .sher2 tr td:nth-child(2) { width: 10%; }\n\n            tr.gap td { padding-bottom: 15px; }\n        ",document.head.appendChild(e)}(),document.querySelectorAll(".sher").forEach(n=>n.innerHTML=t(e(n),2)),document.querySelectorAll(".sher2").forEach(t=>t.innerHTML=n(e(t))),document.querySelectorAll(".mukhammas").forEach(e=>o(e,[5])),document.querySelectorAll(".mukhammas-3-2").forEach(e=>o(e,[3,2])),document.querySelectorAll(".mukhammas-mixed").forEach(e=>l(e,[{count:4,mode:"2col"},{count:1,mode:"1col"}])),document.querySelectorAll(".musaddas").forEach(e=>o(e,[4,2])),document.querySelectorAll(".musaddas-6").forEach(e=>o(e,[6])),document.querySelectorAll(".musaddas-mixed").forEach(e=>l(e,[{count:4,mode:"2col"},{count:2,mode:"1col"}])),document.querySelectorAll("[data-pattern]").forEach(e=>{const t=(n=e.dataset.pattern)?n.split("+").map(e=>parseInt(e,10)).filter(Boolean):null;var n;t&&o(e,t)}),document.querySelectorAll("[data-mixed]").forEach(e=>{const t=e.dataset.mixed.split(",").map(e=>{const[t,n]=e.split(":");return{count:parseInt(t,10),mode:n}});t&&l(e,t)}),console.log("%cShakeebJustify applied â€” data-pattern & data-mixed enabled","color: green; font-weight: bold;")}window.ShakeebJustify={apply:r},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()}();