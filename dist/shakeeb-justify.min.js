/*!
 * ShakeebJustify (Poetry Justification for Urdu / Nastaliq)
 * Author: Shakeeb Ahmad
 * Website: https://shakeeb.in
 * Version: 1.0.2
 * License: MIT
 */
!function(){function e(e){const t=e.cloneNode(!0);return t.querySelectorAll("br").forEach(e=>e.replaceWith("\n")),t.querySelectorAll("p, div, li").forEach(e=>e.append("\n")),t.textContent.replace(/\n\s*\n+/g,"\n").trim()}function t(e,t=2){if(!e.length)return"یہاں اک شعر ہونا چاہیے تھا۔";const n=e.split("\n").filter(Boolean);let l="";return n.forEach((e,n)=>{l+=`<tr${(n+1)%t===0?' class="gap"':""}><td>${e}</td></tr>`}),`<table class="sher">${l}</table>`}function n(e){if(!e.length)return"یہاں اک شعر ہونا چاہیے تھا۔";const t=e.split("\n").filter(Boolean);let n="";for(let e=0;e<t.length;e+=2){n+=`\n                <tr class="gap">\n                    <td>${t[e]||""}</td>\n                    <td></td>\n                    <td>${t[e+1]||""}</td>\n                </tr>\n            `}return`<table class="sher2">${n}</table>`}function l(t,n,l){const o=function(e,t){const n=[];let l=0;for(;l<e.length;)for(let o of t)l<e.length&&(n.push(e.slice(l,l+o)),l+=o);return n}(e(t).split("\n").filter(Boolean),n);t.innerHTML=o.map(e=>l(e.join("\n"),e.length)).join("")}function o(){!function(){if(document.getElementById("shakeeb-justify-style"))return;const e=document.createElement("style");e.id="shakeeb-justify-style",e.textContent="\n            .sher, .sher td,\n            .sher2, .sher2 td,\n            .qata, .qata td,\n            .mukhammas, .mukhammas td,\n            .musaddas, .musaddas td {\n                text-align: justify;\n                text-align-last: justify;\n                direction: rtl;\n                line-height: 1.5em;\n                margin: 0 auto;\n                unicode-bidi: plaintext;\n            }\n\n            .sher2 td { width: 46%; }\n            .sher2 tr td:nth-child(2) { width: 10%; }\n\n            table { border-collapse: collapse; }\n\n            tr.gap td { padding-bottom: 15px; }\n        ",document.head.appendChild(e)}(),document.querySelectorAll(".sher").forEach(n=>n.innerHTML=t(e(n),2)),document.querySelectorAll(".sher2").forEach(t=>t.innerHTML=n(e(t))),document.querySelectorAll(".qata, .rubai").forEach(e=>l(e,[4],t)),document.querySelectorAll(".mukhammas").forEach(e=>l(e,[5],t)),document.querySelectorAll(".musaddas").forEach(e=>l(e,[4,2],t)),document.querySelectorAll(".musaddas-6").forEach(e=>l(e,[6],t)),document.querySelectorAll(".musaddas-mixed").forEach(l=>{const o=e(l).split("\n").filter(Boolean),r=o.slice(0,4).join("\n"),a=o.slice(4,6).join("\n");l.innerHTML=n(r)+t(a,2)}),console.log("%cShakeebJustify v1.0.2 applied — https://shakeeb.in","color: green; font-weight: bold;")}window.ShakeebJustify={apply:o,tabulate:t,tabulate2:n},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}();